version: '3.9'

services:
  cypress:
    build:
      context: ..
      dockerfile: apps/client/cypress/Dockerfile
    image: dso-console/cypress:ci
    container_name: dso-console_cypress
    command: cypress:run-ct --browser chrome
    volumes:
      - ../apps/client/cypress:/app/apps/client/cypress
    env_file:
      - ../apps/server/env/.env.ci
    environment:
      NODE_ENV: test
      CT: "true"
      ARGOCD_URL: https://argo-cd.readthedocs.io
      GITLAB_URL: https://gitlab.com
      HARBOR_URL: https://goharbor.io
      NEXUS_URL: https://sonatype.com/products/nexus-repository
      SONARQUBE_URL: https://www.sonarqube.org
      VAULT_URL: https://www.vaultproject.io
    networks:
      - dso-network

networks:
  dso-network:
    driver: bridge
    # driver_opts:
    # com.docker.network.driver.mtu: 1450
